"""123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFremove redundant structure and ligand entry123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFusage: python merge.py123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF"""123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFimport os123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFimport sys123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFdef merge():123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    """123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    find all ligands record file under this folder and merge them123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    find all structures record file under this folder and merge them123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    :return:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    """123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    FILE_LIST = os.listdir(os.getcwd())123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    strucs = set([])123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    for file_name in FILE_LIST:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF        if file_name.endswith('_structures.txt'):123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            tmp = open(file_name).readline().strip().split(', ')123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            tmp = set(tmp)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            print "read {}, get {} structure entrys.".format(file_name, len(tmp))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            strucs = strucs | tmp123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    with open("structures.txt","w") as fout:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF        fout.write(','.join(strucs))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    print "Get {} unique structure entry.".format(len(strucs))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    ligands = set([])123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    for file_name in FILE_LIST:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF        if file_name.endswith('_ligands.txt'):123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            tmp = open(file_name).readline().strip().split(' ')123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            tmp = set(tmp)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            print "read {}, get {} ligand entrys.".format(file_name, len(tmp))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF            ligands = ligands | tmp123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    with open("ligands.txt","w") as fout:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF        fout.write(','.join(ligands))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    print "Get {} unique ligands entry.".format(len(ligands))123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFmerge()123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF