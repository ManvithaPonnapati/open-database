# shapes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Shape matching123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFHere, we are trying to solve the problem of shape-matching.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFWe are given two pieces of a shape; for instance, two halves123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFof a cut triangle. However, we do not know whether these two123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpieces join together or not. We use a convolutional neural123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFnetwork together with incremental weight-loading in order to123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFaccurately predict whether to halves of a shape match each123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFother, regardless of initial position and rotation.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### Input123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFThe input to our program is a dataset of 50K 100x100 image pairs123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFof two matching pieces of a shape. Here are a couple (enlarged)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFexample image pairs from our dataset:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFA cut triangle.  123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF<img src="shape_generation/images/1_L.png?raw=true" alt="Lock image 1" style="width: 120px;"/>123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF<img src="shape_generation/images/1_K.png?raw=true" alt="Key image 1" style="width: 120px;"/>123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFA cut square.  123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF<img src="shape_generation/images/3_L.png?raw=true" alt="Lock image 3" style="width: 120px;"/>123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF<img src="shape_generation/images/3_K.png?raw=true" alt="Key image 3" style="width: 120px;"/>123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF#### Datasets123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFCurrently, we have [several datasets](https://electronneutrino.com/affinity/shapes/datasets/)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFfor training. Here are what the naming conventions mean:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `MSHAPES` - the name of the dataset (always MSHAPES in our case)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `[x]DEG` - (`0<=x<=180`) - the maximum rotation of each shape, in degrees,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFfrom its original position. Note that since both the lock image123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFand the key image can be rotated in either direction by `x` degrees,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFall datasets where `DEG>180` are equivalent (this is also partially123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFtrue for all datasets with `DEG>90`).123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `COLOR` - (can be `ONE` or `RANDOM`) - `ONE` means that all of the shapes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFin the database are the same color; `RANDOM` means that each pair is its123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFown (random) color. Thus, when training a network on a `RANDOMCOLOR`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFdataset, there is a very high change that it will simply learn colors123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFrather than learning to match shapes.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* cut type - (currently only `SIMPLE`) - the way the shapes are cut.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF`SIMPLE` means that they are cut by a straight line. In the future,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFwe are looking to implement more complex cuts, and having incorrect123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFimage pairs that are less obvious (like not fitting in some notches.)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFIncorrect examples are dynamically generated by incorrectly matching123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFlock images and key images (uniformity of selection is observed.)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### Training123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFWe train our model using a relatively standard convolutional123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFneural network (for details, see `inference()` in 123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF`simpletrain5/st5.py`).123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF#### Weight loading123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFIf we try to train this network on randomly rotated images, the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFcross-entropy loss gets stuck at 0.69--this means that, most of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFthe time, the network is randomly guessing, and is not learning123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFanything. Thus, we use the idea of *weight loading*. First, we123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFtrain the network on matching shapes rotated at most ten degrees123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFfor, say, 1000 iterations. Then, we retain the weights, but123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFswitch the dataset to one of images rotated at most *thirty*123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFdegrees. We continue in a similar pattern through datasets123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFwith images rotated 60, 135, and, finally 180 degrees, and, on123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFthe final dataset with random rotation, we get a cross-entropy123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFloss comparable to the one we get on the 10-degree dataset.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFThis has several immediate implications for neural architercutes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFin drug design--if, at first, we train a network on protein-ligand123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFcrystallographic data with the ligands randomly rotated by a small123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFangle, and then load those weights into another net, we can expect123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFthat the second net will get comparable accuracy *without at all123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFconsidering the orientation of either the protein or the ligand*.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFThis seems like a promising step in the development of more123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpowerful drug design networks.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Shape generation123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFRun `shape_generation/main.py`.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFEdit flags in `shape_generation/nshapegenflags.py`:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `IMAGE_NUM` - the number of images to be generated123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `DIM` - dimension of images123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `COLOR` - what color to use for the shapes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `RANDOM_COLOR` - boolean; whether to use random colors for the shapes instead. Overrides `COLOR`. (This is nice for quickly being able to tell whether two shapes match or not)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `ROTATE` - Whether to rotate the generated shape pieces123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `SIMPLE` - **(experimental!)** boolean; whether to use simple geometric shapes or more complex geometric shapes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF* `CUT` - **(not fully implemented)** which cut style to use when cutting the shapes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Code123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFSome of the code in this project is based on the Tensorflow CIFAR-10123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFexample code, used under the Apache License 2.0. Most of the code123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFused is in `st5.py`. The full license notice is reproduced here:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFCopyright 2016 The TensorFlow Authors.  All rights reserved.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF                                 Apache License123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF                           Version 2.0, January 2004123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF                        http://www.apache.org/licenses/123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   1. Definitions.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "License" shall mean the terms and conditions for use, reproduction,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      and distribution as defined by Sections 1 through 9 of this document.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Licensor" shall mean the copyright owner or entity authorized by123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the copyright owner that is granting the License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Legal Entity" shall mean the union of the acting entity and all123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      other entities that control, are controlled by, or are under common123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      control with that entity. For the purposes of this definition,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "control" means (i) the power, direct or indirect, to cause the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      direction or management of such entity, whether by contract or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      otherwise, or (ii) ownership of fifty percent (50%) or more of the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      outstanding shares, or (iii) beneficial ownership of such entity.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "You" (or "Your") shall mean an individual or Legal Entity123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      exercising permissions granted by this License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Source" form shall mean the preferred form for making modifications,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      including but not limited to software source code, documentation123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      source, and configuration files.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Object" form shall mean any form resulting from mechanical123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      transformation or translation of a Source form, including but123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      not limited to compiled object code, generated documentation,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      and conversions to other media types.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Work" shall mean the work of authorship, whether in Source or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Object form, made available under the License, as indicated by a123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      copyright notice that is included in or attached to the work123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (an example is provided in the Appendix below).123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Derivative Works" shall mean any work, whether in Source or Object123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      form, that is based on (or derived from) the Work and for which the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      editorial revisions, annotations, elaborations, or other modifications123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      represent, as a whole, an original work of authorship. For the purposes123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      of this License, Derivative Works shall not include works that remain123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      separable from, or merely link (or bind by name) to the interfaces of,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the Work and Derivative Works thereof.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Contribution" shall mean any work of authorship, including123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the original version of the Work and any modifications or additions123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      to that Work or Derivative Works thereof, that is intentionally123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      submitted to Licensor for inclusion in the Work by the copyright owner123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      or by an individual or Legal Entity authorized to submit on behalf of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the copyright owner. For the purposes of this definition, "submitted"123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      means any form of electronic, verbal, or written communication sent123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      to the Licensor or its representatives, including but not limited to123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      communication on electronic mailing lists, source code control systems,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      and issue tracking systems that are managed by, or on behalf of, the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Licensor for the purpose of discussing and improving the Work, but123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      excluding communication that is conspicuously marked or otherwise123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      designated in writing by the copyright owner as "Not a Contribution."123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      "Contributor" shall mean Licensor and any individual or Legal Entity123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      on behalf of whom a Contribution has been received by Licensor and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      subsequently incorporated within the Work.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   2. Grant of Copyright License. Subject to the terms and conditions of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      this License, each Contributor hereby grants to You a perpetual,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      worldwide, non-exclusive, no-charge, royalty-free, irrevocable123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      copyright license to reproduce, prepare Derivative Works of,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      publicly display, publicly perform, sublicense, and distribute the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Work and such Derivative Works in Source or Object form.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   3. Grant of Patent License. Subject to the terms and conditions of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      this License, each Contributor hereby grants to You a perpetual,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      worldwide, non-exclusive, no-charge, royalty-free, irrevocable123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (except as stated in this section) patent license to make, have made,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      use, offer to sell, sell, import, and otherwise transfer the Work,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      where such license applies only to those patent claims licensable123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      by such Contributor that are necessarily infringed by their123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Contribution(s) alone or by combination of their Contribution(s)123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      with the Work to which such Contribution(s) was submitted. If You123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      institute patent litigation against any entity (including a123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      cross-claim or counterclaim in a lawsuit) alleging that the Work123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      or a Contribution incorporated within the Work constitutes direct123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      or contributory patent infringement, then any patent licenses123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      granted to You under this License for that Work shall terminate123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      as of the date such litigation is filed.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   4. Redistribution. You may reproduce and distribute copies of the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Work or Derivative Works thereof in any medium, with or without123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      modifications, and in Source or Object form, provided that You123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      meet the following conditions:123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (a) You must give any other recipients of the Work or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          Derivative Works a copy of this License; and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (b) You must cause any modified files to carry prominent notices123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          stating that You changed the files; and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (c) You must retain, in the Source form of any Derivative Works123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          that You distribute, all copyright, patent, trademark, and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          attribution notices from the Source form of the Work,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          excluding those notices that do not pertain to any part of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          the Derivative Works; and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      (d) If the Work includes a "NOTICE" text file as part of its123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          distribution, then any Derivative Works that You distribute must123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          include a readable copy of the attribution notices contained123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          within such NOTICE file, excluding those notices that do not123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          pertain to any part of the Derivative Works, in at least one123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          of the following places: within a NOTICE text file distributed123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          as part of the Derivative Works; within the Source form or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          documentation, if provided along with the Derivative Works; or,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          within a display generated by the Derivative Works, if and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          wherever such third-party notices normally appear. The contents123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          of the NOTICE file are for informational purposes only and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          do not modify the License. You may add Your own attribution123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          notices within Derivative Works that You distribute, alongside123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          or as an addendum to the NOTICE text from the Work, provided123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          that such additional attribution notices cannot be construed123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF          as modifying the License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      You may add Your own copyright statement to Your modifications and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      may provide additional or different license terms and conditions123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      for use, reproduction, or distribution of Your modifications, or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      for any such Derivative Works as a whole, provided Your use,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      reproduction, and distribution of the Work otherwise complies with123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the conditions stated in this License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   5. Submission of Contributions. Unless You explicitly state otherwise,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      any Contribution intentionally submitted for inclusion in the Work123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      by You to the Licensor shall be under the terms and conditions of123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      this License, without any additional terms or conditions.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Notwithstanding the above, nothing herein shall supersede or modify123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the terms of any separate license agreement you may have executed123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      with Licensor regarding such Contributions.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   6. Trademarks. This License does not grant permission to use the trade123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      names, trademarks, service marks, or product names of the Licensor,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      except as required for reasonable and customary use in describing the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      origin of the Work and reproducing the content of the NOTICE file.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   7. Disclaimer of Warranty. Unless required by applicable law or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      agreed to in writing, Licensor provides the Work (and each123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Contributor provides its Contributions) on an "AS IS" BASIS,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      implied, including, without limitation, any warranties or conditions123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      PARTICULAR PURPOSE. You are solely responsible for determining the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      appropriateness of using or redistributing the Work and assume any123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      risks associated with Your exercise of permissions under this License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   8. Limitation of Liability. In no event and under no legal theory,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      whether in tort (including negligence), contract, or otherwise,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      unless required by applicable law (such as deliberate and grossly123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      negligent acts) or agreed to in writing, shall any Contributor be123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      liable to You for damages, including any direct, indirect, special,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      incidental, or consequential damages of any character arising as a123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      result of this License or out of the use or inability to use the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      Work (including but not limited to damages for loss of goodwill,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      work stoppage, computer failure or malfunction, or any and all123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      other commercial damages or losses), even if such Contributor123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      has been advised of the possibility of such damages.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   9. Accepting Warranty or Additional Liability. While redistributing123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      the Work or Derivative Works thereof, You may choose to offer,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      and charge a fee for, acceptance of support, warranty, indemnity,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      or other liability obligations and/or rights consistent with this123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      License. However, in accepting such obligations, You may act only123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      on Your own behalf and on Your sole responsibility, not on behalf123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      of any other Contributor, and only if You agree to indemnify,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      defend, and hold each Contributor harmless for any liability123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      incurred by, or claims asserted against, such Contributor by reason123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF      of your accepting any such warranty or additional liability.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   END OF TERMS AND CONDITIONS123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   APPENDIX: How to apply the Apache License to your work.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   To apply the Apache License to your work, attach the following123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   boilerplate notice, with the fields enclosed by brackets "[]"123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   replaced with your own identifying information. (Don't include123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   the brackets!)  The text should be enclosed in the appropriate123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   comment syntax for the file format. We also recommend that a123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   file or class name and description of purpose be included on the123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   same "printed page" as the copyright notice for easier123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   identification within third-party archives.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   Copyright 2016, The Authors.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   Licensed under the Apache License, Version 2.0 (the "License");123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   you may not use this file except in compliance with the License.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   You may obtain a copy of the License at123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF       http://www.apache.org/licenses/LICENSE-2.0123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   Unless required by applicable law or agreed to in writing, software123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   distributed under the License is distributed on an "AS IS" BASIS,123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF   See the License for the specific language governing permissions and123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF    limitations under the License.