# AffinityDB123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Requirement123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFInstall using `pip install -r requirements.txt`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Edit config123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- `database_root` : dir to store the generated data of AffinityDB123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- `smina` : path of (smina)[https://sourceforge.net/projects/smina/] executable file123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- `list_of_PDBs_to_download` : path of txt file, the PDB is is written in one line and split by ', '123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- `bindb_pm` : index is the path for the binding affinity record123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Operation123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### create123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFCreate a new task. It will generate an unique sn number, create table and folder for this task.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# create a task to download pdb files123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# they're stored under the folder named by123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# [sn]_[folder_name] e.g. 1_download123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=download --folder_name=download123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# create a tak to calculate native contact123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=native_contact --receptor_sn=[int] --crystal_sn=[int] --docked_sn=[int]123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### continue123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFContinue a task.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# [int] is an unique sn number for a task123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --continue --table_sn=[int]123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### delete123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFDelete all the relative data for a task. Including the table and folder for this task and all the other task depend on it.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# [int] is an unique sn number for a task123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --continue --table_sn=[int]123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### progress123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFMonitor the statue of the job by idx.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# Statue of one table by table_idx123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython databser_create_v2.py --progress --tabie_idx=[idx]123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# Statue of all table123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --progress --table_idx=0123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Args123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFArguments for different kinds of task123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**action** : type of task. `download, split_receptor, split_ligand, reorder, smina_dock, rmsd, overlap, native_contact`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**folder_name** : name of folder to store the generated data. ( When create the folder the sn number for the task will be the prefix ) . Required when action in `doanlowd, split_receptor, split_ligand, reorder, smina_dock`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**table_sn** : sn number for a task. Required when `continue, delete` task123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**download_sn** : sn for the task which download pdb. Required when action in `split_receptor, split_ligand`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**receptor_sn** : sn for the task which generate receptor. Required when action in `smina_dock, reorder, native_contact`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**ligand_sn** : sn for the task which generate ligand. Required when action in `reorder, smina_dock`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**crystal_sn** : sn for the task which generate ligand. Required when action in `rmsd, overlap, native_contact`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**docked_sn** : sn for the task which docking ligand. Required when action in `rmsd, overlap, native_contact`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**dock_param** : parameter used for docking123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**column_name**: name of column to be inserted123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**column_dtype**: data type of the column to be inserted123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF**column_data**: name of .npy file to be loaded into column123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Example123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```bash123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# download pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=download --folder_name=download123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# split the receptor from pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=split_receptor --folder_name=splite_receptor --download_idx=1123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# split the ligand from pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=split_ligand --folder_name=splite_ligand --download_idx=1123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# reorder the ligand123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=reorder --folder_name=reorder --ligand_idx=3 --receptor_idx=2123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# docking123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=smina_dock --folder_name=vinardo --ligand_idx=4 --receptor_idx=2 --param=vinardo123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# calculate rmsd123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=rmsd --crystal_idx=4 --docked_idx=5123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# calculate overlap123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=overlap --crystal_idx=4 --docked_idx=5 --param=default123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# calculate native_contact123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=native_contact --receptor_idx=2 --crystal_idx=4 --docked_idx=5 --param=default123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# load binidng affinity info123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=binding_affinity  --param=pdbbind123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF##Inserting Column123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFYou may insert a new column into an existing table. This will create a duplicate table with the new column added. The new table will have its own unique table ID.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF#Insert column into table specified by download_idx123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=insert_column --column_name=test_column_name --column_dtype=integer --download_idx=1 --folder_name=test_insert_column_folder123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFYou may also add data into this new column. Data should be a saved Numpy array "e.g. testArray.npy" that is located in the DB directory. The Numpy array should be an array of [receptor, data_val] pairs, where "receptor" is the name of the molecule sample associate with the data_val being inserted.123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFAfter mounting the .npy file onto the DB directory, you can insert the data at the time of column creation123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF#Insert data at time of column creation123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=insert_column --column_name=test_column_name --column_dtype=integer --column_data=numpyArrayName --download_idx=1 --folder_name=test_insert_column_folder123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFOr after the column has been created123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''shell123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF#Insert data into existing column123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=insert_column --column_name=test_column_name --column_data=numpyArrayName --download_idx=2 --folder_name=test_insert_column_folder_2123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF'''123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF## Get av4123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### Install requirement123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFInstall using `pip install -r requirements.txt`123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### Edit config.py123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- database_root : dir to store the generated data of AffinityDB123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF- smina : path of (smina)[https://sourceforge.net/projects/smina/] executable file123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF### Run code123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```bash123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# download pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=download --folder_name=download123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# split the receptor from pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=split_receptor --folder_name=splite_receptor --download_idx=1123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# split the ligand from pdb123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --action=split_ligand --folder_name=splite_ligand --download_idx=1123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF# parse binding affinity123343DJNBFHJBJNKFJNBHDRFBNJKDJUNFpython database_create.py --create --binding_affinity --param=pdbbind123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF```123343DJNBFHJBJNKFJNBHDRFBNJKDJUNF